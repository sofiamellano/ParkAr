<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="AppMovil.Pages.LoginPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:viewmodels="clr-namespace:AppMovil.ViewModels"
    Title="{Binding Title}"
    Shell.NavBarIsVisible="False"
    BackgroundColor="#F8F9FA"
    x:DataType="viewmodels:LoginPageViewModel">

    <ScrollView>
        <Grid Padding="25" RowSpacing="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!-- Main Content -->
            <StackLayout Grid.Row="0" 
                        Spacing="25" 
                        VerticalOptions="CenterAndExpand"
                        Margin="0,50,0,0">
                
                <!-- Logo Section -->
                <StackLayout Spacing="15" HorizontalOptions="Center">
                    <!-- Logo Circle -->
                    <Frame BackgroundColor="#4A90E2" 
                           CornerRadius="40" 
                           WidthRequest="80" 
                           HeightRequest="80" 
                           HorizontalOptions="Center"
                           HasShadow="True"
                           Padding="0">
                        <Label Text="P" 
                               FontSize="35" 
                               FontAttributes="Bold" 
                               TextColor="White" 
                               HorizontalOptions="Center" 
                               VerticalOptions="Center" />
                    </Frame>

                    <!-- App Name -->
                    <Label Text="ParkAR Mobile" 
                           FontSize="32" 
                           FontAttributes="Bold" 
                           TextColor="#2C3E50"
                           HorizontalOptions="Center" />

                    <!-- Welcome Text -->
                    <Label Text="Bienvenido de vuelta" 
                           FontSize="16" 
                           TextColor="#7F8C8D"
                           HorizontalOptions="Center" />
                </StackLayout>

                <!-- Form Section -->
                <StackLayout Spacing="18" Margin="0,20,0,0">
                    
                    <!-- Email Field -->
                    <StackLayout Spacing="8">
                        <Label Text="Email" 
                               FontSize="14" 
                               FontAttributes="Bold"
                               TextColor="#2C3E50"
                               Margin="12,0,0,0" />
                        <Frame BackgroundColor="White" 
                               BorderColor="#E1E8ED" 
                               CornerRadius="12"
                               HasShadow="False"
                               Padding="0">
                            <Entry x:Name="EmailEntry"
                                   Text="{Binding Email}"
                                   Placeholder="Ingresa tu email"
                                   Keyboard="Email"
                                   FontSize="16"
                                   TextColor="#2C3E50"
                                   PlaceholderColor="#95A5A6"
                                   ClearButtonVisibility="WhileEditing"
                                   Margin="15,12" />
                        </Frame>
                    </StackLayout>

                    <!-- Password Field -->
                    <StackLayout Spacing="8">
                        <Label Text="Contrasena" 
                               FontSize="14" 
                               FontAttributes="Bold"
                               TextColor="#2C3E50"
                               Margin="12,0,0,0" />
                        <Frame BackgroundColor="White" 
                               BorderColor="#E1E8ED" 
                               CornerRadius="12"
                               HasShadow="False"
                               Padding="0">
                            <Entry x:Name="PasswordEntry"
                                   Text="{Binding Password}"
                                   Placeholder="Ingresa tu contrasena"
                                   IsPassword="True"
                                   FontSize="16"
                                   TextColor="#2C3E50"
                                   PlaceholderColor="#95A5A6"
                                   ClearButtonVisibility="WhileEditing"
                                   Margin="15,12" />
                        </Frame>
                    </StackLayout>

                    <!-- Login Button -->
                    <Frame BackgroundColor="#4A90E2"
                           CornerRadius="12"
                           HasShadow="True"
                           Margin="0,20,0,10"
                           Padding="0">
                        <Button Text="Iniciar Sesion"
                                Command="{Binding LoginCommand}"
                                IsEnabled="{Binding IsLoginEnabled}"
                                FontSize="18"
                                FontAttributes="Bold"
                                TextColor="White"
                                BackgroundColor="Transparent"
                                HeightRequest="55"
                                BorderWidth="0" />
                    </Frame>

                    <!-- Loading Indicator -->
                    <StackLayout IsVisible="{Binding IsBusy}" 
                               HorizontalOptions="Center" 
                               Orientation="Horizontal"
                               Spacing="10"
                               Margin="0,10,0,0">
                        <ActivityIndicator IsRunning="{Binding IsBusy}" 
                                         Color="#4A90E2" 
                                         WidthRequest="20" 
                                         HeightRequest="20" />
                        <Label Text="Iniciando sesion..." 
                               FontSize="14" 
                               TextColor="#4A90E2" 
                               VerticalOptions="Center" />
                    </StackLayout>
                </StackLayout>

            </StackLayout>

            <!-- Divider Section -->
            <StackLayout Grid.Row="1" 
                        Orientation="Horizontal" 
                        HorizontalOptions="FillAndExpand" 
                        VerticalOptions="Center"
                        Spacing="15"
                        Margin="0,30,0,20">
                <BoxView BackgroundColor="#E1E8ED" 
                        HeightRequest="1" 
                        HorizontalOptions="FillAndExpand" 
                        VerticalOptions="Center" />
                <Label Text="o" 
                      FontSize="14" 
                      TextColor="#95A5A6" 
                      FontAttributes="Bold"
                      VerticalOptions="Center" />
                <BoxView BackgroundColor="#E1E8ED" 
                        HeightRequest="1" 
                        HorizontalOptions="FillAndExpand" 
                        VerticalOptions="Center" />
            </StackLayout>

            <!-- Register Section -->
            <StackLayout Grid.Row="2" 
                        Spacing="15" 
                        Margin="0,0,0,40">
                
                <!-- Register Call to Action -->
                <Label Text="Â¿Primera vez en ParkAR?" 
                       FontSize="16" 
                       TextColor="#2C3E50"
                       FontAttributes="Bold"
                       HorizontalOptions="Center" />

                <!-- Register Button - MEJORADO -->
                <Frame BackgroundColor="Transparent"
                       BorderColor="#4A90E2"
                       CornerRadius="12"
                       HasShadow="False"
                       Padding="1">
                    <Button Text="Crear Nueva Cuenta"
                            Command="{Binding GoToRegisterCommand}"
                            FontSize="16"
                            FontAttributes="Bold"
                            TextColor="#4A90E2"
                            BackgroundColor="White"
                            HeightRequest="50"
                            CornerRadius="11"
                            BorderWidth="0" />
                </Frame>

                <!-- Additional Info -->
                <Label Text="Registrate gratis y gestiona tus reservas facilmente"
                       FontSize="12"
                       TextColor="#95A5A6"
                       HorizontalOptions="Center"
                       HorizontalTextAlignment="Center"
                       Margin="10,5,10,0" />

            </StackLayout>

        </Grid>
    </ScrollView>

</ContentPage>