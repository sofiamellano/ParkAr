<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="AppMovil.Pages.PagoPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:viewmodels="clr-namespace:AppMovil.ViewModels"
    Title="{Binding Title}"
    x:DataType="viewmodels:PagoPageViewModel">

    <ScrollView>
        <StackLayout Padding="20" Spacing="20">

            <Frame BackgroundColor="LightBlue" 
                   BorderColor="Transparent" 
                   CornerRadius="10"
                   Margin="0,10,0,20">
                <StackLayout Spacing="5">
                    <Label 
                        Text="Resumen del Pago" 
                        FontSize="18" 
                        FontAttributes="Bold" 
                        HorizontalOptions="Center" />
                    
                    <Label 
                        Text="{Binding DescripcionPago}" 
                        FontSize="14" 
                        HorizontalOptions="Center" />
                    
                    <Label 
                        Text="{Binding MontoAPagar, StringFormat='${0:N2}'}" 
                        FontSize="24" 
                        FontAttributes="Bold" 
                        HorizontalOptions="Center"
                        TextColor="Blue" />
                </StackLayout>
            </Frame>

            <Label 
                Text="Informacion de la Tarjeta" 
                FontSize="16" 
                FontAttributes="Bold" 
                Margin="0,10,0,0" />

            <Frame BackgroundColor="Transparent" BorderColor="LightGray" CornerRadius="5">
                <Entry 
                    Text="{Binding NumeroTarjeta}"
                    Placeholder="Numero de tarjeta"
                    Keyboard="Numeric"
                    MaxLength="19"
                    ClearButtonVisibility="WhileEditing" />
            </Frame>

            <Frame BackgroundColor="Transparent" BorderColor="LightGray" CornerRadius="5">
                <Entry 
                    Text="{Binding NombreTitular}"
                    Placeholder="Nombre del titular"
                    ClearButtonVisibility="WhileEditing" />
            </Frame>

            <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                <Frame Grid.Column="0" BackgroundColor="Transparent" BorderColor="LightGray" CornerRadius="5">
                    <Entry 
                        Text="{Binding FechaVencimiento}"
                        Placeholder="MM/AA"
                        Keyboard="Numeric"
                        MaxLength="5"
                        ClearButtonVisibility="WhileEditing" />
                </Frame>

                <Frame Grid.Column="1" BackgroundColor="Transparent" BorderColor="LightGray" CornerRadius="5">
                    <Entry 
                        Text="{Binding Cvv}"
                        Placeholder="CVV"
                        Keyboard="Numeric"
                        MaxLength="4"
                        IsPassword="True"
                        ClearButtonVisibility="WhileEditing" />
                </Frame>
            </Grid>

            <Frame BackgroundColor="LightYellow" 
                   BorderColor="Transparent" 
                   CornerRadius="5"
                   Margin="0,20,0,0">
                <StackLayout Orientation="Horizontal" Spacing="10">
                    <Label Text="[Seguro]" FontSize="16" />
                    <Label 
                        Text="Tu informacion esta protegida con encriptacion SSL" 
                        FontSize="12"
                        VerticalOptions="Center"
                        HorizontalOptions="FillAndExpand" />
                </StackLayout>
            </Frame>

            <StackLayout Spacing="10" Margin="0,30,0,0">
                <Button 
                    Text="Procesar Pago"
                    Command="{Binding ProcessPaymentCommand}"
                    BackgroundColor="Green"
                    TextColor="White"
                    CornerRadius="5"
                    HeightRequest="50" />

                <Button 
                    Text="Cancelar"
                    Command="{Binding CancelCommand}"
                    BackgroundColor="Transparent"
                    TextColor="Red"
                    BorderColor="Red"
                    BorderWidth="1"
                    CornerRadius="5"
                    HeightRequest="50" />
            </StackLayout>

            <ActivityIndicator 
                IsVisible="{Binding IsBusy}" 
                IsRunning="{Binding IsBusy}" 
                Color="Blue"
                Margin="0,20,0,0" />

        </StackLayout>
    </ScrollView>

</ContentPage>