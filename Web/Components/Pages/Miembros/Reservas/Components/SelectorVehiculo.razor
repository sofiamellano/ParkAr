<div class="card border-0 shadow-sm mb-4">
    <div class="card-body">
        <h5 class="card-title">
            <i class="bi bi-car-front me-2 text-primary"></i>Seleccionar Vehículo
        </h5>
        @if (Vehiculos.Any())
        {
            <select class="form-select" value="@VehiculoSeleccionadoId" @onchange="OnVehiculoChanged">
                <option value="0">Seleccione su vehículo</option>
                @foreach (var vehiculo in Vehiculos)
                {
                    <option value="@vehiculo.Id">@vehiculo.Patente - @vehiculo.TipoVehiculo</option>
                }
            </select>
        }
        else
        {
            <div class="alert alert-warning">
                <i class="bi bi-exclamation-triangle me-2"></i>
                No tienes vehículos registrados. 
                <a href="/miembros/perfil" class="alert-link">Agregar vehículo</a>
            </div>
        }
    </div>
</div>

@code {
    [Parameter]
    public List<Vehiculo> Vehiculos { get; set; } = new();

    [Parameter]
    public int VehiculoSeleccionadoId { get; set; }

    [Parameter]
    public EventCallback<int> VehiculoSeleccionadoIdChanged { get; set; }

    private async Task OnVehiculoChanged(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int nuevoId))
        {
            VehiculoSeleccionadoId = nuevoId;
            await VehiculoSeleccionadoIdChanged.InvokeAsync(nuevoId);
        }
    }
}